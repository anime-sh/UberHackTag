{% extends "basetemplate.html" %}

{% block title %}Riding{% endblock %}

{% block main %}
<div class="row justify-content-center my-5">
  <div class="card shadow overflow-auto px-0" style="width: 30rem; height: 34rem;" id="view">
    <div v-if="!ridefinished" class="card-body d-flex flex-column">
      <!-- driver details here -->
      <h1 style="color: green">Driver Details</h1>
      <p>[[name]]</p>
      <p>[[car]]</p>
      <p>[[rating]]</p>
      <p>[[carnumber]]</p>
      <p>[[kyd]]</p>
      <p>Your Donation: [[extrafare]]</p>
      <button v-on:click="finishRide()" class="btn btn-dark mt-auto align-self-center" style="width: fit-content;">Finish Ride</button>
    </div>
    <div v-if="ridefinished" class="card-body d-flex flex-column">
      <!-- ride finished here -->
      <button v-on:click="finish()" class="btn btn-dark mt-auto align-self-center" style="width: fit-content;">Submit</button>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>

  var rider = new Vue({
    el: '#view',
    delimiters: ['[[', ']]'],
    data: {
      name: "{{name | safe}}",
      car: "{{car | safe}}",
      rating: {{rating | safe}},
      carnumber: "{{carnumber | safe}}",
      kyd: "{{kyd | safe}}",
      index: {{index | safe}},
      fare: {{fare | safe}},
      extrafare: {{extrafare | safe}},
      rfc: {{rfc | safe}},
      needinfo: "{{needinfo | safe}}",
      amountraised: "{{amountraised | safe}}",
      amountneeded: "{{amountneeded | safe}}",
      ridefinished: 0
    },
    methods: {
      finishRide() {
        this.ridefinished = 1;
      },
      finish() {
        window.location.href = "/rider";
      }
    }
  })

</script>
{% endblock %}